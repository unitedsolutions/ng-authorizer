{"version":3,"sources":["../../../../tmp/add-edit-view/state-setter/routes-flattener/routes-flattener.ts"],"names":[],"mappings":"AAAA,OAAO,KAAK,CAAC,MAAiB,QAAQ,CAAC;AACvC,OAAO,iBAAiB,MAAM,4BAA4B,CAAC;AAE3D,MAAM,CAAC,OAAO,0BAA0B,MAAM;IACvC,IAAA,sBAAM,EAAE,sCAAc,EAAE,qBAAc,EAAd,mCAAc,EAAE,iBAAU,EAAV,+BAAU,CAAW;IAC7D,IAAA,mBAAe,EAAf,oCAAe,EAAE,2BAAuB,EAAvB,4CAAuB,CAAW;IAExD,CAAC,CAAC,IAAI,CAAC,cAAc,IAAI,MAAM,EAAE,UAAA,KAAK;QACpC,IAAG,KAAK,CAAC,KAAK,EAAE;YACd,OAAO;SACR;QAEI,IAAA,iBAAI,EAAE,yBAAQ,EAAE,wBAAiB,EAAE,2BAAS,EAAE,2BAAS,CAAU;QACjE,IAAA,2BAAS,EAAE,mBAAK,CAAU;QAC/B,IAAI,QAAQ,GAAG,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QAClC,IAAI,QAAQ,GAAG,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QACtD,IAAA,wCAAqD,EAApD,cAAM,EAAE,aAAK,CAAwC;QAE1D,IAAG,eAAe,EAAE;YAClB,SAAS,GAAG,eAAe,CAAC;SAC7B;QAED,IAAI,SAAS,GAAG;YACd,KAAK,OAAA;YACL,KAAK,OAAA;YACL,MAAM,QAAA;YACN,SAAS,WAAA;YACT,SAAS,WAAA;YACT,IAAI,EAAE,QAAQ;YACd,KAAK,EAAE,QAAQ;YACf,OAAO,EAAE,QAAQ;YACjB,QAAQ,EAAE,SAAS;SACpB,CAAC;QAEF,IAAG,QAAQ,EAAE;YACX,IAAG,CAAC,CAAC,CAAC,MAAM,CAAC,QAAQ,EAAE,EAAC,IAAI,EAAE,EAAE,EAAC,CAAC,CAAC,MAAM,EAAE;gBACzC,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;aAC3B;YAED,OAAO,eAAe,CAAC;gBACrB,MAAM,QAAA;gBACN,OAAO,SAAA;gBACP,SAAS,WAAA;gBACT,eAAe,iBAAA;gBACf,KAAK,EAAE,QAAQ;gBACf,cAAc,EAAE,QAAQ;aACzB,CAAC,CAAC;SACJ;QAED,IAAG,SAAS,IAAI,OAAO,EAAE;YACvB,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;SAC3B;IACH,CAAC,CAAC,CAAC;IAEH,OAAO,SAAS,CAAC;AACnB,CAAC","file":"routes-flattener.js","sourceRoot":"","sourcesContent":["import * as _            from 'lodash';\nimport parentLabelGetter from './_lib/parent-label-getter';\n\nexport default function routesFlattener(params) {\n  let {routes, childrenRoutes, flattened = [], paths = []} = params;\n  let {include = false, universalParent = false} = params;\n  \n  _.each(childrenRoutes || routes, route => {\n    if(route.admin) {\n      return;\n    }\n    \n    let {path, children, default: _default, component, universal} = route;\n    let {endpoints, group} = route;\n    let newPaths = paths.concat(path);\n    let fullPath = [''].concat(_.compact(newPaths)).join('/');\n    let [parent, label] = parentLabelGetter(routes, newPaths);\n    \n    if(universalParent) {\n      universal = universalParent;\n    }\n    \n    let routeData = {\n      label,\n      group,\n      parent,\n      universal,\n      endpoints,\n      path: fullPath,\n      paths: newPaths,\n      default: _default,\n      selected: universal\n    };\n    \n    if(children) {\n      if(!_.filter(children, {path: ''}).length) {\n        flattened.push(routeData);\n      }\n      \n      return routesFlattener({\n        routes, \n        include,\n        flattened,\n        universalParent,\n        paths: newPaths,\n        childrenRoutes: children\n      });\n    }\n    \n    if(component || include) {\n      flattened.push(routeData);\n    }\n  });\n  \n  return flattened;\n}\n"]}